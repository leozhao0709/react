{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/leizhao/Documents/my_git/react/nextJsLearn/src/pages/[country]/index.tsx\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from 'next/router';\nimport Thumbnail from '../../components/thumbnail';\nimport styles from './index.module.scss';\nimport Error from '../_error'; // import Error from 'next/error';\n\nvar Home = function Home(props) {\n  var router = useRouter();\n\n  if (props.statusCode) {\n    return __jsx(Error, {\n      statusCode: props.statusCode,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (router.isFallback) {\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  var shows = props.shows;\n\n  var renderShows = function renderShows() {\n    return shows.map(function (showItem) {\n      return __jsx(\"li\", {\n        key: showItem.id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 9\n        }\n      }, __jsx(Thumbnail, {\n        caption: showItem.show.name,\n        imageUrl: showItem.show.image && showItem.show.image.medium,\n        href: \"/[country]/[showId]\",\n        as: \"/\".concat(props.country, \"/\").concat(showItem.show.id),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }\n      }));\n    });\n  };\n\n  return __jsx(\"ul\", {\n    className: styles.list,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 10\n    }\n  }, renderShows());\n};\n\nHome.defaultProps = {};\nexport var __N_SSG = true;\nexport default Home;","map":{"version":3,"sources":["/Users/leizhao/Documents/my_git/react/nextJsLearn/src/pages/[country]/index.tsx"],"names":["useRouter","Thumbnail","styles","Error","Home","props","router","statusCode","isFallback","shows","renderShows","map","showItem","id","show","name","image","medium","country","list","defaultProps"],"mappings":";;;;;AAEA,SAASA,SAAT,QAA0B,aAA1B;AAEA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,KAAP,MAAkB,WAAlB,C,CACA;;AAQA,IAAMC,IAAyB,GAAG,SAA5BA,IAA4B,CAACC,KAAD,EAAsB;AACtD,MAAMC,MAAM,GAAGN,SAAS,EAAxB;;AAEA,MAAIK,KAAK,CAACE,UAAV,EAAsB;AACpB,WAAO,MAAC,KAAD;AAAO,MAAA,UAAU,EAAEF,KAAK,CAACE,UAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,MAAID,MAAM,CAACE,UAAX,EAAuB;AACrB,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACD;;AATqD,MAW9CC,KAX8C,GAWpCJ,KAXoC,CAW9CI,KAX8C;;AAYtD,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,WAClBD,KAAK,CAACE,GAAN,CAAU,UAAAC,QAAQ,EAAI;AACpB,aACE;AAAI,QAAA,GAAG,EAAEA,QAAQ,CAACC,EAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,MAAC,SAAD;AACE,QAAA,OAAO,EAAED,QAAQ,CAACE,IAAT,CAAcC,IADzB;AAEE,QAAA,QAAQ,EAAEH,QAAQ,CAACE,IAAT,CAAcE,KAAd,IAAuBJ,QAAQ,CAACE,IAAT,CAAcE,KAAd,CAAoBC,MAFvD;AAGE,QAAA,IAAI,EAAC,qBAHP;AAIE,QAAA,EAAE,aAAMZ,KAAK,CAACa,OAAZ,cAAuBN,QAAQ,CAACE,IAAT,CAAcD,EAArC,CAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAUD,KAXD,CADkB;AAAA,GAApB;;AAcA,SAAO;AAAI,IAAA,SAAS,EAAEX,MAAM,CAACiB,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6BT,WAAW,EAAxC,CAAP;AACD,CA3BD;;AA2DAN,IAAI,CAACgB,YAAL,GAAoB,EAApB;;AAEA,eAAehB,IAAf","sourcesContent":["import React from 'react';\nimport { NextPage, GetStaticPaths, GetStaticProps } from 'next';\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport Thumbnail from '../../components/thumbnail';\nimport styles from './index.module.scss';\nimport Error from '../_error';\n// import Error from 'next/error';\n\ninterface HomeProps extends React.HTMLAttributes<HTMLDivElement> {\n  shows: any[];\n  country: string;\n  statusCode?: number;\n}\n\nconst Home: NextPage<HomeProps> = (props: HomeProps) => {\n  const router = useRouter();\n\n  if (props.statusCode) {\n    return <Error statusCode={props.statusCode} />;\n  }\n\n  if (router.isFallback) {\n    return <div>Loading...</div>;\n  }\n\n  const { shows } = props;\n  const renderShows = () =>\n    shows.map(showItem => {\n      return (\n        <li key={showItem.id}>\n          <Thumbnail\n            caption={showItem.show.name}\n            imageUrl={showItem.show.image && showItem.show.image.medium}\n            href=\"/[country]/[showId]\"\n            as={`/${props.country}/${showItem.show.id}`}\n          />\n        </li>\n      );\n    });\n\n  return <ul className={styles.list}>{renderShows()}</ul>;\n};\n\nexport const getStaticProps: GetStaticProps = async ctx => {\n  try {\n    const { params } = ctx;\n    const country = params!.country;\n    const res = await axios.get(`http://api.tvmaze.com/schedule?country=${country}&date=2014-12-01`);\n    const shows = res.data;\n    return {\n      props: {\n        shows,\n        country\n      }\n    };\n  } catch (error) {\n    return {\n      props: {\n        // axios error response\n        statusCode: error.response ? error.response.status : 500\n      }\n    };\n  }\n};\n\nexport const getStaticPaths: GetStaticPaths = async () => {\n  const paths = [{ params: { country: 'us' } }];\n  return {\n    paths,\n    fallback: true\n  };\n};\n\nHome.defaultProps = {};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}