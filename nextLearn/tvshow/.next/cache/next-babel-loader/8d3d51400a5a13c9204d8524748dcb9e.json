{"ast":null,"code":"var _jsxFileName = \"/Users/leizhao/Documents/my_git/react/nextJsLearn/src/pages/[country]/index.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport Thumbnail from '../../components/thumbnail';\nimport styles from './index.module.scss';\nimport Error from '../_error'; // import Error from 'next/error';\n\nconst Home = props => {\n  const router = useRouter();\n\n  if (props.statusCode) {\n    return __jsx(Error, {\n      statusCode: props.statusCode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (router.isFallback) {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 12\n      }\n    }, \"Loading...\");\n  }\n\n  const {\n    shows\n  } = props;\n\n  const renderShows = () => shows.map(showItem => {\n    return __jsx(\"li\", {\n      key: showItem.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }\n    }, __jsx(Thumbnail, {\n      caption: showItem.show.name,\n      imageUrl: showItem.show.image && showItem.show.image.medium,\n      href: \"/[country]/[showId]\",\n      as: `/${props.country}/${showItem.show.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }\n    }));\n  });\n\n  return __jsx(\"ul\", {\n    className: styles.list,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 10\n    }\n  }, renderShows());\n};\n\nexport const getStaticProps = async ctx => {\n  try {\n    const {\n      params\n    } = ctx;\n    const country = params.country;\n    const res = await axios.get(`http://api.tvmaze.com/schedule?country=${country}&date=2014-12-01`);\n    const shows = res.data;\n    return {\n      props: {\n        shows,\n        country\n      }\n    };\n  } catch (error) {\n    return {\n      props: {\n        // axios error response\n        statusCode: error.response ? error.response.status : 500\n      }\n    };\n  }\n};\nexport const getStaticPaths = async () => {\n  const paths = [{\n    params: {\n      country: 'us'\n    }\n  }];\n  return {\n    paths,\n    fallback: true\n  };\n};\nHome.defaultProps = {};\nexport default Home;","map":{"version":3,"sources":["/Users/leizhao/Documents/my_git/react/nextJsLearn/src/pages/[country]/index.tsx"],"names":["React","useRouter","axios","Thumbnail","styles","Error","Home","props","router","statusCode","isFallback","shows","renderShows","map","showItem","id","show","name","image","medium","country","list","getStaticProps","ctx","params","res","get","data","error","response","status","getStaticPaths","paths","fallback","defaultProps"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,KAAP,MAAkB,WAAlB,C,CACA;;AAQA,MAAMC,IAAyB,GAAIC,KAAD,IAAsB;AACtD,QAAMC,MAAM,GAAGP,SAAS,EAAxB;;AAEA,MAAIM,KAAK,CAACE,UAAV,EAAsB;AACpB,WAAO,MAAC,KAAD;AAAO,MAAA,UAAU,EAAEF,KAAK,CAACE,UAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,MAAID,MAAM,CAACE,UAAX,EAAuB;AACrB,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACD;;AAED,QAAM;AAAEC,IAAAA;AAAF,MAAYJ,KAAlB;;AACA,QAAMK,WAAW,GAAG,MAClBD,KAAK,CAACE,GAAN,CAAUC,QAAQ,IAAI;AACpB,WACE;AAAI,MAAA,GAAG,EAAEA,QAAQ,CAACC,EAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,SAAD;AACE,MAAA,OAAO,EAAED,QAAQ,CAACE,IAAT,CAAcC,IADzB;AAEE,MAAA,QAAQ,EAAEH,QAAQ,CAACE,IAAT,CAAcE,KAAd,IAAuBJ,QAAQ,CAACE,IAAT,CAAcE,KAAd,CAAoBC,MAFvD;AAGE,MAAA,IAAI,EAAC,qBAHP;AAIE,MAAA,EAAE,EAAG,IAAGZ,KAAK,CAACa,OAAQ,IAAGN,QAAQ,CAACE,IAAT,CAAcD,EAAG,EAJ5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AAUD,GAXD,CADF;;AAcA,SAAO;AAAI,IAAA,SAAS,EAAEX,MAAM,CAACiB,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6BT,WAAW,EAAxC,CAAP;AACD,CA3BD;;AA6BA,OAAO,MAAMU,cAA8B,GAAG,MAAMC,GAAN,IAAa;AACzD,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAAaD,GAAnB;AACA,UAAMH,OAAO,GAAGI,MAAM,CAAEJ,OAAxB;AACA,UAAMK,GAAG,GAAG,MAAMvB,KAAK,CAACwB,GAAN,CAAW,0CAAyCN,OAAQ,kBAA5D,CAAlB;AACA,UAAMT,KAAK,GAAGc,GAAG,CAACE,IAAlB;AACA,WAAO;AACLpB,MAAAA,KAAK,EAAE;AACLI,QAAAA,KADK;AAELS,QAAAA;AAFK;AADF,KAAP;AAMD,GAXD,CAWE,OAAOQ,KAAP,EAAc;AACd,WAAO;AACLrB,MAAAA,KAAK,EAAE;AACL;AACAE,QAAAA,UAAU,EAAEmB,KAAK,CAACC,QAAN,GAAiBD,KAAK,CAACC,QAAN,CAAeC,MAAhC,GAAyC;AAFhD;AADF,KAAP;AAMD;AACF,CApBM;AAsBP,OAAO,MAAMC,cAA8B,GAAG,YAAY;AACxD,QAAMC,KAAK,GAAG,CAAC;AAAER,IAAAA,MAAM,EAAE;AAAEJ,MAAAA,OAAO,EAAE;AAAX;AAAV,GAAD,CAAd;AACA,SAAO;AACLY,IAAAA,KADK;AAELC,IAAAA,QAAQ,EAAE;AAFL,GAAP;AAID,CANM;AAQP3B,IAAI,CAAC4B,YAAL,GAAoB,EAApB;AAEA,eAAe5B,IAAf","sourcesContent":["import React from 'react';\nimport { NextPage, GetStaticPaths, GetStaticProps } from 'next';\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport Thumbnail from '../../components/thumbnail';\nimport styles from './index.module.scss';\nimport Error from '../_error';\n// import Error from 'next/error';\n\ninterface HomeProps extends React.HTMLAttributes<HTMLDivElement> {\n  shows: any[];\n  country: string;\n  statusCode?: number;\n}\n\nconst Home: NextPage<HomeProps> = (props: HomeProps) => {\n  const router = useRouter();\n\n  if (props.statusCode) {\n    return <Error statusCode={props.statusCode} />;\n  }\n\n  if (router.isFallback) {\n    return <div>Loading...</div>;\n  }\n\n  const { shows } = props;\n  const renderShows = () =>\n    shows.map(showItem => {\n      return (\n        <li key={showItem.id}>\n          <Thumbnail\n            caption={showItem.show.name}\n            imageUrl={showItem.show.image && showItem.show.image.medium}\n            href=\"/[country]/[showId]\"\n            as={`/${props.country}/${showItem.show.id}`}\n          />\n        </li>\n      );\n    });\n\n  return <ul className={styles.list}>{renderShows()}</ul>;\n};\n\nexport const getStaticProps: GetStaticProps = async ctx => {\n  try {\n    const { params } = ctx;\n    const country = params!.country;\n    const res = await axios.get(`http://api.tvmaze.com/schedule?country=${country}&date=2014-12-01`);\n    const shows = res.data;\n    return {\n      props: {\n        shows,\n        country\n      }\n    };\n  } catch (error) {\n    return {\n      props: {\n        // axios error response\n        statusCode: error.response ? error.response.status : 500\n      }\n    };\n  }\n};\n\nexport const getStaticPaths: GetStaticPaths = async () => {\n  const paths = [{ params: { country: 'us' } }];\n  return {\n    paths,\n    fallback: true\n  };\n};\n\nHome.defaultProps = {};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}